@{
    int postId = 0;
    int threadId = 0;

    if (!(int.TryParse(Request.QueryString["postId"], out postId) && int.TryParse(Request.QueryString["threadId"], out threadId)))
    {
        Response.Redirect($"~/cshtml/index");
    }

    var forumLogic = EPAM.Final_Common.DependencyResolver.ForumLogic;
    EPAM.Final_Entities.Post post = forumLogic.GetPost(postId);

    if (post.Author.Equals(User.Identity.Name) || User.IsInRole("moderator"))
    {
        forumLogic.DeletePost(postId);
        Response.Redirect($"~/cshtml/thread?threadId={threadId}");
    }

    Response.Redirect($"~/cshtml/index");
}